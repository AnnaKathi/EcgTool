CREATE DATABASE `ecg`

USE `ecg`

CREATE TABLE algRpeaks (
  ID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  Name VARCHAR(50) NOT NULL,
  PRIMARY KEY(ID)
)

CREATE TABLE algFeatures (
  ID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  Name VARCHAR(50) NOT NULL,
  PRIMARY KEY(ID)
)

CREATE TABLE algPreprocessing (
  ID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  Name VARCHAR(50) NOT NULL,
  PRIMARY KEY(ID)
)

CREATE TABLE diseases (
  ID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  Name VARCHAR(50) NOT NULL,
  PRIMARY KEY(ID)
)

CREATE TABLE postures (
  ID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  Name VARCHAR(50) NOT NULL,
  PRIMARY KEY(ID)
)

CREATE TABLE places (
  ID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  Name VARCHAR(50) NOT NULL,
  PRIMARY KEY(ID)
)

CREATE TABLE positions (
  ID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  Name VARCHAR(50) NOT NULL,
  PRIMARY KEY(ID)
)

CREATE TABLE researchers (
  ID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  Name VARCHAR(50) NOT NULL,
  PRIMARY KEY(ID)
)

CREATE TABLE states (
  ID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  Name VARCHAR(50) NOT NULL,
  PRIMARY KEY(ID)
)

CREATE TABLE Subjects (
  ID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  Firstname VARCHAR(50) NOT NULL,
  Lastname VARCHAR(50) NOT NULL,
  Age INTEGER UNSIGNED NOT NULL,
  Sex BOOL NOT NULL,
  PRIMARY KEY(ID)
)

CREATE TABLE sessions (
  ID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  places_ID INTEGER UNSIGNED NOT NULL,
  Stamp DATETIME NOT NULL,
  Note LONGTEXT NULL,
  PRIMARY KEY(ID),
  INDEX Sessions_FKIndex1(places_ID)
)

CREATE TABLE SessionResearchers (
  sessions_ID INTEGER UNSIGNED NOT NULL,
  researchers_ID INTEGER UNSIGNED NOT NULL,
  PRIMARY KEY(Sessions_ID, Researchers_ID),
  INDEX Sessions_has_Researchers_FKIndex1(Sessions_ID),
  INDEX Sessions_has_Researchers_FKIndex2(Researchers_ID)
)

CREATE TABLE SubDiseases (
  Subjects_ID INTEGER UNSIGNED NOT NULL,
  Diseases_ID INTEGER UNSIGNED NOT NULL,
  PRIMARY KEY(Subjects_ID, Diseases_ID),
  INDEX Subjects_has_Diseases_FKIndex1(Subjects_ID),
  INDEX Subjects_has_Diseases_FKIndex2(Diseases_ID)
)

CREATE TABLE ecgData (
  ID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  sessions_ID INTEGER UNSIGNED NOT NULL,
  subjects_ID INTEGER UNSIGNED NOT NULL,
  positions_ID INTEGER UNSIGNED NOT NULL,
  states_ID INTEGER UNSIGNED NOT NULL,
  postures_ID INTEGER UNSIGNED NOT NULL,
	ecgValues LONGTEXT NOT NULL,
  PRIMARY KEY(ID),
  INDEX ecgData_FKIndex2(postures_ID),
  INDEX ecgData_FKIndex3(States_ID),
  INDEX ecgData_FKIndex4(Positions_ID),
  INDEX ecgData_FKIndex5(Subjects_ID),
  INDEX ecgData_FKIndex6(Sessions_ID)
)

CREATE TABLE templates (
  ID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  ecgData_ID INTEGER UNSIGNED NOT NULL,
  algPreprocessing_ID INTEGER UNSIGNED NOT NULL,
  algRpeaks_ID INTEGER UNSIGNED NOT NULL,
  algFeatures_ID INTEGER UNSIGNED NOT NULL,
  Template VARCHAR(1024) NOT NULL,
  PRIMARY KEY(ID),
  INDEX Features_FKIndex1(algPreprocessing_ID),
  INDEX Features_FKIndex2(algRpeaks_ID),
  INDEX Features_FKIndex3(algFeatures_ID),
  INDEX Features_FKIndex4(ECGData_ID)
)

